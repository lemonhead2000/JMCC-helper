# JMCC Compiler

compilation/decompilation, syntax highlighting, and functions based on the Language Server Protocol for [JustMC compiler](https://github.com/donzgold/JustMC_compilator)

## Возможности

### 1. **Подсветка синтаксиса**
- Настраиваемая подсветка синтаксиса для файлов `.jc`.

### 2. **Автодополнение**
- Контекстно-зависимое автодополнение для объектов justcode.

### 3. **Информация при наведении**
- Подробная информация об justcode объектах при наведении курсора.
- Отображает документацию, сигнатуры методов и детали классов.

### 4. **Переход к определению**
- Быстрая навигация к определениям JMCC объектов одним кликом (по умолчанию клавиша `CTRL`).

### 5. **Подсказки по сигнатурам**
- Подсказки по сигнатурам функций в реальном времени, отображающие параметры во время ввода.

### 6. **Текстовые аннотации**
- Автоматически отображают имена параметров рядом с аргументами.

### 7. **Компиляция и декомпиляция**
- Компиляция `.jc` файлов в:
  - **URL** для публикации или обмена.
  - **Локальные JSON файлы** для хранения на устройстве.
- Декомпиляция `.json` файлов обратно в формат JustCode.
- Настраиваемые пути вывода и режимы компиляции через файл `.jmccconfig.json`.

### 8. **Обфускация кода**
- Дополнительные клавиши в контекстном меню для обфускации кода в виде файла и в виде `URL`.

### 9. **Быстрая компиляция**
- Компиляция активного `.jc` файла клавишей `F5`.
- Сохранение и компиляция `.jc` файла в указанное место клавишей `F5`.

### 10. **Конфигурация рабочего пространства**
- Автоматическое создание и управление файлом `.jmccconfig.json` в папке `.vscode` вашего проекта.
- Настраиваемые параметры:
  - Путь к компилятору Python.
  - Режим компиляции по умолчанию (`UPLOAD`, `SAVE`, `BOTH`).
  - Путь для сохранения скомпилированных файлов.
  - Очистка терминала перед выполнением команд.

## Установка

1. Установите расширение из [Visual Studio Code Marketplace](https://marketplace.visualstudio.com/items?itemName=lemonhead2000.jmcc-helper).
2. Настройте файл `.jmccconfig.json` в папке `.vscode` вашего проекта, указав путь к компилятору Python.

### Команды
Расширение предоставляет следующие команды, доступные через палитру команд (`Ctrl+Shift+P`) или контекстное меню:

- **JMCC: Compile as URL** — компилирует и загружает в облако файл  `.jc`.
- **JMCC: Compile as File** — компилирует `.jc` и загружает `.json` на устройство.
- **JMCC: Compile obfuscate File** — сохраняет на устройство обфусцированный `.jc` файл.
- **JMCC: Compile obfuscate URL** — загружает в облако обфусцированный `.jc` файл.
- **JMCC: Decompile File** — декомпилирует `.json` файл в `.jc`.
- **JMCC: Decompile File with obfmap** — декомпилирует обфусцированный `.json` в необфусцированный `.json` при наличии карты обфускации `.obfmap`.
- **JMCC: Compile Active File** — компилирует текущий открытый `.jc` файл.
- **JMCC: Save and upload** — сохраняет на устройство и загружает в облако `.jc` файл.

### Контекстное меню
Щёлкните правой кнопкой мыши на файл `.jc` или `.json` в проводнике, чтобы получить доступ к командам компиляции и декомпиляции.

### Горячие клавиши
- **F5**: Запуск активного файла (компиляция для `.jc` или декомпиляция для `.json`).

## Конфигурация
### Настройка конфига
```json
{
  "compilerPath": "COMPILER_PATH",
  "compilerOutputPath": "OUTPUT_FILE"
}
```
| Поле | Описание |
|------|---------|
| `compilerPath` | Путь к исполняемому файлу JMCC |
| `defaultCompileActiveFileMode` | Режим компиляции активного файла:<br><br>• `"UPLOAD"` — результат загружается в облако<br>• `"SAVE"` — файл сохраняется локально по пути из `compilerOutputPath`<br>• `"BOTH"` — выполняется и загрузка, и сохранение |
| `compilerOutputPath` | Путь для сохранения скомпилированных или декомпилированных файлов. Если не указан, файл сохраняется в той же папке, где находится исходный файл. |
| `clearTerminalBeforeCommand` | Если `true`, перед выполнением каждой команды консоль будет очищаться. |

### UI-настройки
| Настройка                                      | Тип                                   | Значение по умолчанию | Описание                                                   |
|-----------------------------------------------|---------------------------------------|-----------------------|------------------------------------------------------------|
| jmcc-helper.hideInlayHints                    | boolean                               | false                 | Скрывать inlay hints (текстовые аннотации рядом с кодом)    |
| jmcc-helper.hideHover                         | boolean                               | false                 | Отключить показ информации при наведении (hover)           |
| jmcc-helper.hideCompletion                    | boolean                               | false                 | Отключить автодополнение                                    |
| jmcc-helper.hideSignatureHelp                 | boolean                               | false                 | Отключить подсказки по сигнатурам функций                   |
| jmcc-helper.defaultCompileActiveFileMode      | enum (UPLOAD, SAVE, BOTH)             | UPLOAD                | Режим компиляции активного файла при нажатии F5            |
| jmcc-helper.clearTerminalBeforeCommand        | boolean                               | true                  | Очищать терминал перед выполнением каждой команды          |
| jmcc-helper.compilerPath                      | string                                | ""                    | Путь к исполняемому JMCC  |
| jmcc-helper.compilerOutputPath                | string                                | ""                    | Путь для сохранения скомпилированных/декомпилированных файлов |
| jmcc-helper.autoCreateConfig                  | boolean                               | true                  | Автоматически создавать `.jmccconfig.json` в папке `.vscode` |

## Разработка

Для участия в разработке или локальной сборки расширения:

1. Клонируйте репозиторий:
   ```bash
   git clone <URL-репозитория>
   ```
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Упакуйте расширение для распространения:
   ```bash
   vsce package
   ```

## Поддержка

Для вопросов, предложений или сообщений об ошибках создайте задачу в [GitHub-репозитории](https://github.com/lemonhead2000/JMCC-helper/issues).
